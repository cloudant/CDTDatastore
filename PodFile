use_frameworks!

def import_test_pods
    pod 'Specta'
    pod 'Expecta'
    pod 'OCMock'
    pod 'OHHTTPStubs'
    pod "MRDatabaseContentChecker"
end

def import_RA_pods
    pod "Unirest", :git => 'https://github.com/rhyshort/unirest-obj-c.git'
    pod 'TRVSMonitor'
    pod 'NSData+Base64'
end

def import_encrypted_test_pods
    pod 'Specta'
    pod 'Expecta'
    pod 'OCMock'
    pod 'OHHTTPStubs'
end

target :CDTDatastoreTestApp do
  pod 'CDTDatastore', :path => '.'

  target :CDTDatastoreTests do
      import_test_pods
      inherit! :complete
  end

  target :CDTDatastoreReplicationAcceptanceTests do
      import_RA_pods
  end

end

target :CDTTestAppEncrypted do
  pod 'CDTDatastore/SQLCipher', :path => '.'
  xcconfig = {'OTHER_CFLAGS' => '$(inherited) -DENCRYPT_DATABASE' }

  target :CDTDatastoreEncryptionTests do
      inherit! :complete
      import_encrypted_test_pods
  end

  target :CDTDatastoreEncryptedReplicationAcceptanceTests do
      import_RA_pods
  end
end

target :CDTDatastoreCLTest do
  pod 'CDTDatastore', :path => '.'

  target :CDTDatastoreTestsOSX do
      inherit! :complete
      import_test_pods
  end

  target :CDTDatastoreReplicationAcceptanceTestsOSX do
      import_RA_pods
      inherit! :complete
  end

end

target :CDTDatastoreCLEncryptedTest do
  pod 'CDTDatastore/SQLCipher', :path => '.'

  target :CDTDatastoreEncryptionTestsOSX do
      import_encrypted_test_pods
      inherit! :complete

  end

  target :CDTDatastoreEncryptedReplicationAcceptanceTestsOSX do
      import_RA_pods
      inherit! :complete

  end
end
